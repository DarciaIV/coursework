$creds=Get-Credential
$dcs="chi2","dal1","fra2","hkg3","mia2","mum1","par2","sin4","sjl1","syd3","tok2","tor1","wdc1" 

foreach ($dc in $dcs){
    Disconnect-VIServer -Confirm:$false
    Connect-VIServer prod-vsv-$dc-1.vm.ironport.com -Credential $creds -WarningAction SilentlyContinue
    New-Snapshot -VM prod-vsv-$dc-1.vm.ironport.com -Name BeforePatch
    }
